<ui:FluentWindow x:Class="SpaceMaster.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
        Title="SpaceMaster"
        Width="900"
        Height="600"
        MinWidth="700"
        MinHeight="500"
        WindowStartupLocation="CenterScreen"
        ExtendsContentIntoTitleBar="True"
        WindowBackdropType="Mica"
        Icon="pack://application:,,,/app.ico">

    <ui:FluentWindow.Resources>
        <!-- 导航项按钮样式 -->
        <Style x:Key="NavButtonStyle" TargetType="Button">
            <Setter Property="Height" Value="40" />
            <Setter Property="Margin" Value="4,2" />
            <Setter Property="Padding" Value="0" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="HorizontalContentAlignment" Value="Stretch" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Border"
                                Background="{TemplateBinding Background}"
                                CornerRadius="6"
                                Padding="0">
                            <Grid>
                                <!-- 左侧选中指示条 -->
                                <Border x:Name="Indicator"
                                        Width="3"
                                        Height="16"
                                        HorizontalAlignment="Left"
                                        VerticalAlignment="Center"
                                        Margin="4,0,0,0"
                                        CornerRadius="1.5"
                                        Background="#0078D4"
                                        Visibility="Collapsed" />
                                <!-- 内容 -->
                                <ContentPresenter HorizontalAlignment="Left"
                                                  VerticalAlignment="Center"
                                                  Margin="12,0,0,0" />
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="Background"
                                        Value="{DynamicResource ControlFillColorSecondaryBrush}" />
                            </Trigger>
                            <Trigger Property="Tag" Value="Selected">
                                <Setter TargetName="Border" Property="Background"
                                        Value="{DynamicResource ControlFillColorDefaultBrush}" />
                                <Setter TargetName="Indicator" Property="Visibility" Value="Visible" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </ui:FluentWindow.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <ui:TitleBar Grid.Row="0" Title="SpaceMaster" />

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition x:Name="SidebarColumn" Width="200" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!-- 侧边栏 -->
            <Border Grid.Column="0"
                    Background="{DynamicResource ApplicationBackgroundBrush}"
                    BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                    BorderThickness="0,0,1,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <!-- 折叠按钮 -->
                    <Button x:Name="BtnToggle"
                            Grid.Row="0"
                            Width="36"
                            Height="36"
                            HorizontalAlignment="Left"
                            Background="Transparent"
                            BorderThickness="0"
                            Click="BtnToggle_Click"
                            Margin="6,6,6,12"
                            ToolTip="展开/折叠">
                        <ui:SymbolIcon Symbol="LineHorizontal320" FontSize="16" />
                    </Button>

                    <!-- 导航菜单 -->
                    <StackPanel Grid.Row="1" Margin="0">
                        <Button x:Name="BtnMigration"
                                Style="{StaticResource NavButtonStyle}"
                                Tag="Selected"
                                Click="BtnMigration_Click">
                            <StackPanel Orientation="Horizontal">
                                <ui:SymbolIcon Symbol="ArrowMove24" FontSize="18" />
                                <TextBlock x:Name="TxtMigration" Text="迁移"
                                           VerticalAlignment="Center" Margin="12,0,0,0" />
                            </StackPanel>
                        </Button>

                        <Button x:Name="BtnHistory"
                                Style="{StaticResource NavButtonStyle}"
                                Click="BtnHistory_Click">
                            <StackPanel Orientation="Horizontal">
                                <ui:SymbolIcon Symbol="History24" FontSize="18" />
                                <TextBlock x:Name="TxtHistory" Text="历史记录"
                                           VerticalAlignment="Center" Margin="12,0,0,0" />
                            </StackPanel>
                        </Button>
                    </StackPanel>

                    <!-- 底部菜单 -->
                    <StackPanel Grid.Row="2" Margin="0,0,0,8">
                        <Button x:Name="BtnTheme"
                                Style="{StaticResource NavButtonStyle}"
                                Click="BtnTheme_Click">
                            <StackPanel Orientation="Horizontal">
                                <ui:SymbolIcon x:Name="IconTheme" Symbol="WeatherSunny24" FontSize="18" />
                                <TextBlock x:Name="TxtTheme" Text="深色模式"
                                           VerticalAlignment="Center" Margin="12,0,0,0" />
                            </StackPanel>
                        </Button>

                        <TextBlock x:Name="TxtVersion"
                                   Text="v1.0.0.0"
                                   FontSize="11"
                                   Foreground="{DynamicResource TextFillColorTertiaryBrush}"
                                   HorizontalAlignment="Center"
                                   Margin="0,8,0,0" />
                    </StackPanel>
                </Grid>
            </Border>

            <!-- 内容区 -->
            <Frame x:Name="MainFrame"
                   Grid.Column="1"
                   NavigationUIVisibility="Hidden" />
        </Grid>
    </Grid>
</ui:FluentWindow>
