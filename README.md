# SpaceMaster

基于符号链接的磁盘空间管理工具，无缝迁移文件到其他磁盘，释放系统盘空间。

## 功能特性

### 核心功能

- **符号链接迁移** - 将文件/文件夹迁移到其他磁盘，在原位置创建符号链接，程序无感知
- **拖拽操作** - 直接拖拽文件或文件夹到窗口即可开始迁移
- **智能路径管理** - 自动生成目标路径：`{目标盘}:\MovedFiles\{源盘符}\{原路径}`
- **空间检测** - 迁移前自动检查目标磁盘可用空间
- **占用检测** - 检测文件是否被其他程序占用

### 历史记录

- **迁移历史** - 记录所有迁移操作，支持筛选查看
- **还原功能** - 将已迁移的文件还原到原始位置
- **重做功能** - 将已还原的文件重新迁移
- **有效性检测** - 自动检测符号链接是否有效（绿色有效/红色无效）
- **记录管理** - 支持删除历史记录

### 界面设计

- **Fluent Design** - 采用 WPF-UI 实现现代化界面
- **Mica 效果** - 支持 Windows 11 云母材质背景
- **深色/浅色主题** - 一键切换主题模式
- **可折叠侧边栏** - PowerToys 风格的导航栏

## 系统要求

- Windows 10/11
- .NET 8.0 Runtime
- 管理员权限（创建符号链接需要）

## 使用方法

### 迁移文件

1. 以管理员身份运行 SpaceMaster
2. 将文件或文件夹拖拽到主窗口
3. 选择目标磁盘
4. 点击"开始迁移"

### 还原文件

1. 进入"历史记录"页面
2. 选择要还原的记录（状态为"已迁移"）
3. 点击"还原选中项"

### 重做迁移

1. 进入"历史记录"页面
2. 选择要重做的记录（状态为"已还原"）
3. 点击"重做选中项"

## 工作原理

```
迁移前:
C:\Games\BigGame\          (10GB 占用 C 盘空间)

迁移后:
C:\Games\BigGame\          (符号链接 → D:\MovedFiles\C\Games\BigGame\)
D:\MovedFiles\C\Games\BigGame\  (实际文件位置)
```

程序访问 `C:\Games\BigGame\` 时，Windows 会自动重定向到 `D:\MovedFiles\C\Games\BigGame\`，对程序完全透明。

## 技术栈

- .NET 8.0
- WPF + WPF-UI 3.0
- SQLite (Microsoft.Data.Sqlite)
- CommunityToolkit.Mvvm

## 注意事项

- 迁移过程中请勿关闭程序
- 确保目标磁盘有足够空间
- 部分系统文件和正在使用的文件无法迁移
- 符号链接需要管理员权限创建

## 许可证

MIT License
